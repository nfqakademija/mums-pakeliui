{% extends 'base.html.twig' %}

{% block content %}
    <a  href="javascript:history.back()" style="color:#000; font-size:20px;"><i class="fas fa-long-arrow-alt-left"></i> Grižti atgal</a>
    <div class="col-12  search-form" style="margin:10px 0 0 0; padding:0px;">
        <div class="col-3" style=" float:left; padding-top: 25px;margin:auto; text-align:center; border-right:1px solid #eaedf4;">
            <h4> {{ trip.User }}</h4>
            <div class="col-10" style="font-size: 60px;  border-radius: 100%; -webkit-border-radius: 100%; -moz-border-radius: 100%; background: #ffffff; padding:50px; margin: auto; text-align: center;">
            {% if trip.travelerType == 1 %}
               <i class="fas fa-child"></i>
            {% else %}
                <i class="fas fa-car"></i>
            {% endif %}
            </div>

            <div style="text-align: left; margin-top: 25px;"><i class="far fa-envelope"></i>  {{ trip.User.email }}<br>
                <i class="fas fa-phone"></i>  {{ trip.phone }}
            </div>
            {% if trip.travelerType == 1 %}

            {% else %}
                {{ form_start(form) }}
                <div class="col-12" style="padding:0; margin-top:10px">
                    <div class="col-5 col-inline-padding-left" style="padding:0; margin:0">
                        {{ form_row(form.seats, {attr: {class: '', max:  trip.seats }}) }}
                    </div>
                    <div class="col-6 col-inline-padding-left" style="padding-top:25px">
                        {{ form_widget(form.save, {attr: {class: 'btn-yellow'}}) }}
                    </div>
                </div>
                {{ form_end(form) }}
            {% endif %}
        </div>
        <div class="col-9" style="float:left; text-align:left;  padding-top: 25px;">
            <div class="headingDarkNoBorder" style="padding-left: 0">
                <h4><span id="start">{{ trip.departFrom }}</span> <i class="fas fa-long-arrow-alt-right colorYellow"></i> <span id="end">{{ trip.destination }}</span></h4>
            </div>
            <div class="departTime">Išvykimo data: <span class="font-weight:none;">{{ trip.departTime|date("Y-m-d") }}</span></div>
            <div class="departTime">Išvykimo laikas: <span class="font-weight:none;">{{ trip.departTime|date("H:i") }}</span></div>
            <div class="col-12 departTime" style="margin: 25px 0; padding:0;">Vietų skaičius: {{ trip.seats }}</div>
            <div style="margin: 25px 0; padding:0;" class="col-12">
                <div class="col-4 departTime" style="float:left; padding:0;">
                Rūkymas:   {% if trip.smoke==0 %}
                    <i class="material-icons">smoke_free</i>
                {% endif %}
                {% if trip.smoke==1 %}
                    <i class="material-icons">smoking_rooms</i>
                    <i class="fas fa-smoking"></i>
                {% endif %}
                </div>
                <div class="col-4 departTime" style="float:left;">
                Gyvūnai:  {% if trip.pets==0 %}
                    <img src="{{ asset('images/no-pets.png') }}"/>
                {% endif %}
                {% if trip.pets==1 %}
                    <i class="fas fa-paw"></i>
                {% endif %}
                </div>
                <div class="clearBoth"></div>
                <div style="text-align: justify; margin-top:25px"> {{ trip.information }}</div>
            </div>
        </div><div class="clearBoth"></div>
        <div id="map"></div>
        <div id="warnings-panel"></div>
    </div>
{% endblock %}
{% block javascripts %}
    <script src="{{ asset('build/js/app.js') }}"></script>
    <script>

        function initMap() {
            var directionsService = new google.maps.DirectionsService;

            // Create a map and center it on Manhattan.
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 13,
                center: {lat: 54.7000898, lng: 25.1125084}
            });

            // Create a renderer for directions and bind it to the map.
            var directionsDisplay = new google.maps.DirectionsRenderer({map: map});
            calculateAndDisplayRoute(directionsDisplay, directionsService, map);
        }

        function calculateAndDisplayRoute(directionsDisplay, directionsService) {

            // Retrieve the start and end locations and create a DirectionsRequest using
            // Driving directions.
            directionsService.route({
                origin: document.getElementById('start').textContent,
                destination: document.getElementById('end').textContent,
                travelMode: 'DRIVING'
            }, function(response, status) {
                // Route the directions and pass the response to a function to create
                // markers for each step.
                if (status === 'OK') {
                    document.getElementById('warnings-panel').innerHTML =
                        '<b>' + response.routes[0].warnings + '</b>';
                    directionsDisplay.setDirections(response);
                } else {
                    window.alert('Directions request failed due to ' + status);
                }
            });
        }
    </script>

    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB8bciunVlIgmtF5BLbil6zPsfXJHO1WFY&callback=initMap">
    </script>
{% endblock %}