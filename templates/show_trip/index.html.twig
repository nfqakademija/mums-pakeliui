{% extends 'base.html.twig' %}

{% block content %}
    <div class="row">
        <div class="col mb-4">
            <a href="javascript:history.back()" class="itemData"><i class="fas fa-long-arrow-alt-left"></i> Į skelbimų sąrašą</a>
        </div>
    </div>
    <div class="row">
        <div class="col search-form">
            <div class="row">
                <div class="col-3" style="text-align:center; border-right:1px solid #eaedf4;">
                    <div class="row">
                        <div class="col">
                            <h4>{{ trip.User }}</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 travellerIcon">
                            {% if trip.travelerType == 1 %}
                                <i class="fas fa-child"></i>
                            {% else %}
                                <i class="fas fa-car"></i>
                            {% endif %}
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-2"><i class="far fa-envelope"></i></div>
                        <div class="col-10">{{ trip.User.email }}</div>
                    </div>
                    <div class="row">
                        <div class="col-2"><i class="fas fa-phone"></i></div>
                        <div class="col-10">{{ trip.phone }}</div>
                    </div>
                    <div class="row">
                        <div class="col btn-row">
                            <button type="submit" id="trip_search_filter" name="rezervuoti" class="btn btn-yellow">Rezervuoti</button>
                        </div>
                    </div>
                </div>
                <div class="col-5" style="text-align:left">
                    <div class="row">
                        <div class="col headingDarkNoBorder">
                            <h4><span id="start">{{ trip.departFrom }}</span> <i class="fas fa-long-arrow-alt-right colorYellow"></i> <span id="end">{{ trip.destination }}</span></h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 itemTitle">Išvykimo data:</div>
                        <div class="col-6 itemData">{{ trip.departTime|date("Y-m-d") }}</div>
                    </div>
                    <div class="row">
                        <div class="col-6 itemTitle">Išvykimo laikas:</div>
                        <div class="col-6 itemData">{{ trip.departTime|date("H:i") }}</div>
                    </div>
                    <div class="row">
                        <div class="col-6 itemTitle">Vietų skaičius:</div>
                        <div class="col-6 itemData">{{ trip.seats }}</div>
                    </div>
                    <div class="row">
                        <div class="col-6 itemTitle">Rūkymas:</div>
                        <div class="col-6 itemData">
                            {% if trip.smoke==0 %}
                                <i class="material-icons">smoke_free</i>
                            {% endif %}
                            {% if trip.smoke==1 %}
                                <i class="material-icons">smoking_rooms</i>
                                <i class="fas fa-smoking"></i>
                            {% endif %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 itemTitle">Gyvūnai:</div>
                        <div class="col-6 itemData">
                            {% if trip.pets==0 %}
                                <img src="{{ asset('images/no-pets.png') }}"/>
                            {% endif %}
                            {% if trip.pets==1 %}
                                <i class="fas fa-paw"></i>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-4" style="text-align:left">
                    <div class="row">
                        <div class="col" style="text-align: justify"> {{ trip.information }}</div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div id="map"></div>
                    <div id="warnings-panel"></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
    <script src="{{ asset('build/js/app.js') }}"></script>
    <script>

        function initMap() {
            var directionsService = new google.maps.DirectionsService;

            // Create a map and center it on Manhattan.
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 13,
                center: {lat: 54.7000898, lng: 25.1125084}
            });

            // Create a renderer for directions and bind it to the map.
            var directionsDisplay = new google.maps.DirectionsRenderer({map: map});
            calculateAndDisplayRoute(directionsDisplay, directionsService, map);
        }

        function calculateAndDisplayRoute(directionsDisplay, directionsService) {

            // Retrieve the start and end locations and create a DirectionsRequest using
            // Driving directions.
            directionsService.route({
                origin: document.getElementById('start').textContent,
                destination: document.getElementById('end').textContent,
                travelMode: 'DRIVING'
            }, function(response, status) {
                // Route the directions and pass the response to a function to create
                // markers for each step.
                if (status === 'OK') {
                    document.getElementById('warnings-panel').innerHTML =
                        '<b>' + response.routes[0].warnings + '</b>';
                    directionsDisplay.setDirections(response);
                } else {
                    window.alert('Directions request failed due to ' + status);
                }
            });
        }
    </script>

    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB8bciunVlIgmtF5BLbil6zPsfXJHO1WFY&callback=initMap">
    </script>
{% endblock %}